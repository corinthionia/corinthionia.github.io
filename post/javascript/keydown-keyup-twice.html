<!DOCTYPE html><html lang="ko"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="preload" href="/_next/static/media/a15f2fce4b98b461-s.p.woff2" as="font" crossorigin="" type="font/woff2"/><link rel="preload" href="/_next/static/media/ff840cfebfb63b0c-s.p.woff2" as="font" crossorigin="" type="font/woff2"/><link rel="preload" as="image" href="https://velog.velcdn.com/images/corinthionia/post/7ffd8d6e-fcd2-41ed-8e6b-0a77fb6e6851/image.gif"/><link rel="preload" as="image" href="https://images.velog.io/images/corinthionia/post/7fef91ff-02e7-4f89-9077-f32c205be242/Feb-14-2022%2023-47-01.gif"/><link rel="stylesheet" href="/_next/static/css/d63a22f1046c7c17.css" data-precedence="next"/><link rel="stylesheet" href="/_next/static/css/46ef9796eceb51a7.css" data-precedence="next"/><link rel="stylesheet" href="/_next/static/css/bac92e9438d1258e.css" data-precedence="next"/><link rel="stylesheet" href="/_next/static/css/28418f50efbdfac4.css" data-precedence="next"/><link rel="preload" as="script" fetchPriority="low" href="/_next/static/chunks/webpack-bc90c703ef6ae2cf.js"/><script src="/_next/static/chunks/1acbb86d-efb2e74c2b74ce20.js" async=""></script><script src="/_next/static/chunks/886-bb14d9967806ac84.js" async=""></script><script src="/_next/static/chunks/main-app-eadae1023591cf60.js" async=""></script><script src="/_next/static/chunks/943-00bda20aa4b030d5.js" async=""></script><script src="/_next/static/chunks/378-0044a6d389c6dd71.js" async=""></script><script src="/_next/static/chunks/app/layout-8fbc2f207f6b2569.js" async=""></script><script src="/_next/static/chunks/app/post/%5B...slug%5D/page-19105f18c4d10820.js" async=""></script><meta name="next-size-adjust"/><script src="/_next/static/chunks/polyfills-78c92fac7aa8fdd8.js" noModule=""></script></head><body class="__className_f765bc"><script>!function(){try{var d=document.documentElement,n='data-theme',s='setAttribute';var e=localStorage.getItem('theme');if('system'===e||(!e&&true)){var t='(prefers-color-scheme: dark)',m=window.matchMedia(t);if(m.media!==t||m.matches){d.style.colorScheme = 'dark';d[s](n,'dark')}else{d.style.colorScheme = 'light';d[s](n,'light')}}else if(e){d[s](n,e|| '')}if(e==='light'||e==='dark')d.style.colorScheme=e}catch(e){}}()</script><div class="Header_wrapper__seTP2"><div class="Header_itemWrapper__bpYR2"><a href="/"><img alt="logo" loading="lazy" width="60" height="38" decoding="async" data-nimg="1" style="color:transparent" src="/_next/static/media/header_logo_dark.f1f52fe8.svg"/></a><img alt="menu" loading="lazy" width="28" height="28" decoding="async" data-nimg="1" class="Header_menu__t5XtG" style="color:transparent" src="/profile.svg"/><div class="Header_right__AJNjV"><div class="Header_menus__BxqTv"><a href="/post"><span>포스트</span></a><a href="/note"><span>노트</span></a><a href="/snippet"><span>코드조각</span></a></div><span class="Header_border__mqVUf">|</span><img alt="theme" loading="lazy" width="32" height="32" decoding="async" data-nimg="1" class="Header_theme__g2lZL" style="color:transparent;cursor:pointer" src="/_next/static/media/dark.afa46c62.svg"/></div></div></div><div class="app_layout__Cl2eA"><div class="app_grid__9m74A"><main class="app_contents__RnFvu"><article class="PostLayout_wrapper__4Zx6Q"><header class="Header_header__KPaCf"><h2 class="Header_title__yFEr0">[JS] keydown/keyup에서 한글 입력 시 함수가 두 번 실행되는 경우</h2><div class="Header_info__GOBJ7"><a target="_blank" href="https://github.com/corinthionia"><span>@corinthionia</span></a><span>February 17, 2022</span></div></header><main class="MDX_mdx__VyFNl"><p><img src="https://velog.velcdn.com/images/corinthionia/post/7ffd8d6e-fcd2-41ed-8e6b-0a77fb6e6851/image.gif" alt=""/></p>
<br/>
<p><a href="https://mailedit.kr">MailedIt!</a> 서비스를 개발하다 오랫동안 해결하지 못한 에러가 있었다.<br/>
<!-- -->Notion처럼 텍스트를 입력하고 엔터를 누르면 새로운 블럭이 만들어지는데, 기존 텍스트의 마지막 음절이 딸려오는 에러가 발생했다.</p>
<hr/>
<h2 id="원인-분석"><a aria-hidden="true" tabindex="-1" href="#원인-분석"><span class="icon icon-link"></span></a>원인 분석</h2>
<h3 id="1-onkeydown과-onkeypress"><a aria-hidden="true" tabindex="-1" href="#1-onkeydown과-onkeypress"><span class="icon icon-link"></span></a>1. onKeyDown과 onKeyPress</h3>
<p>구글링 해 본 결과, 단순히 <code>onKeyDown</code>을 <code>onKeyPress</code>로 바꾸면 해결된다고 한다.<br/>
<!-- -->그럼 우선 이 둘의 차이점을 알아보자.</p>
<blockquote>
<p><strong>onKeyDown:</strong> keycode 값 - 한/영, Shift, Backsapce 등 인식 가능<br/> <strong>onKeyPress:</strong> ASCII 값 - 한/영, Shift, Backsapce 등 인식 불가</p>
</blockquote>
<p>하지만 우리 프로젝트에서는 <code>Shift</code> 키와 <code>Backspace</code> 키를 인식해야 해서 <code>onKeyPress</code>를 <strong>사용할 수는 없었다.</strong></p>
<h3 id="2-keyboardeventiscomposing"><a aria-hidden="true" tabindex="-1" href="#2-keyboardeventiscomposing"><span class="icon icon-link"></span></a>2. KeyboardEvent.isComposing</h3>
<p><code>KeyboardEvent.isComposing</code>은 입력한 문자가 조합문자인지 아닌지를 판단한다. 한글은 자음과 모음의 조합으로 한 음절이 만들어지기 때문에 조합문자이고, 영어는 조합문자가 아니다.</p>
<p>한글을 입력할 때 자세히 보면 입력 중인 글자 바로 아래에 검은 밑줄이 생기는 경우가 있는데, 이 밑줄이 보이는 상황에서 <code>Enter</code>키를 입력하면 이벤트가 2번 발생하는 이슈가 있다. 왜냐하면 글자가 조합 중인 건지, 조합이 끝난 상태인지 파악하기가 어렵기 때문이다.</p>
<p>그래서 이 이슈는 영어를 입력할 때에는 발생하지 않고, 한글을 입력할 때에만 발생한다 ㅠㅠ!</p>
<hr/>
<h2 id="해결-과정"><a aria-hidden="true" tabindex="-1" href="#해결-과정"><span class="icon icon-link"></span></a>해결 과정</h2>
<h3 id="1-프로젝트-로직-설명"><a aria-hidden="true" tabindex="-1" href="#1-프로젝트-로직-설명"><span class="icon icon-link"></span></a>1. 프로젝트 로직 설명</h3>
<ul>
<li><code>Enter</code> 키 입력 시 블럭 생성</li>
<li><code>Shift + Enter</code> 키 입력 시 블럭 내에서 줄바꿈</li>
<li><code>Backspace</code>키가 입력되고, 블럭 안의 텍스트가 없거나 공백 문자만 있다면 블럭 삭제</li>
</ul>
<br/>
<p>내가 작성한 코드는 아니지만,, 이전에 작성했던 코드는 다음과 같다.</p>
<pre class="language-jsx"><code class="language-jsx"><span class="code-line"><span class="token function">onKeyDownHandler</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span><span class="token property-access">key</span> <span class="token operator">===</span> <span class="token string">&#x27;Enter&#x27;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">      <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">state</span><span class="token punctuation">.</span><span class="token property-access">previousKey</span> <span class="token operator">!==</span> <span class="token string">&#x27;Shift&#x27;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">        e<span class="token punctuation">.</span><span class="token method function property-access">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">props</span><span class="token punctuation">.</span><span class="token method function property-access">addBlock</span><span class="token punctuation">(</span><span class="token punctuation">{</span> 새로운 블럭 <span class="token function">추가</span> <span class="token punctuation">(</span>코드 생략<span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">      <span class="token punctuation">}</span>
</span><span class="code-line">    <span class="token punctuation">}</span> <span class="token keyword control-flow">else</span> <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>
</span><span class="code-line">      e<span class="token punctuation">.</span><span class="token property-access">key</span> <span class="token operator">===</span> <span class="token string">&#x27;Backspace&#x27;</span> <span class="token operator">&amp;&amp;</span>
</span><span class="code-line">      <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">state</span><span class="token punctuation">.</span><span class="token property-access">html</span> <span class="token operator">===</span> <span class="token string">&#x27;&#x27;</span> <span class="token operator">||</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">state</span><span class="token punctuation">.</span><span class="token property-access">html</span> <span class="token operator">===</span> <span class="token string">&#x27;&lt;br&gt;&#x27;</span><span class="token punctuation">)</span>
</span><span class="code-line">    <span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">      e<span class="token punctuation">.</span><span class="token method function property-access">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">props</span><span class="token punctuation">.</span><span class="token method function property-access">deleteBlock</span><span class="token punctuation">(</span><span class="token punctuation">{</span> 블럭 <span class="token function">삭제</span> <span class="token punctuation">(</span>코드 생략<span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">    <span class="token punctuation">}</span>
</span><span class="code-line">    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token method function property-access">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">previousKey</span><span class="token operator">:</span> e<span class="token punctuation">.</span><span class="token property-access">key</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token punctuation">}</span>
</span></code></pre>
<br/>
<h3 id="2-onkeydown을-onkeypress로-바꿔-보기"><a aria-hidden="true" tabindex="-1" href="#2-onkeydown을-onkeypress로-바꿔-보기"><span class="icon icon-link"></span></a>2. onKeyDown을 onKeyPress로 바꿔 보기</h3>
<p>이렇게 하면 <code>Shift</code> 키와 <code>Delete</code> 키를 <strong>인식하지 못해서</strong> 줄바꿈과 블럭 삭제가 안 되는 문제가 발생했다. 우리는 저 두 가지 키를 꼭 인식해야 하므로... <code>onKeyDown</code>을 사용하며 해결할 방법을 모색했다.</p>
<br/>
<h3 id="3-eventnativeeventiscomposing--false-추가하기"><a aria-hidden="true" tabindex="-1" href="#3-eventnativeeventiscomposing--false-추가하기"><span class="icon icon-link"></span></a>3. <u>event.nativeEvent.isComposing === false 추가하기</u></h3>
<pre class="language-jsx"><code class="language-jsx"><span class="code-line"><span class="token function">onKeyDownHandler</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span><span class="token property-access">key</span> <span class="token operator">===</span> <span class="token string">&quot;Enter&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">      <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>
</span><span class="code-line">        e<span class="token punctuation">.</span><span class="token property-access">nativeEvent</span><span class="token punctuation">.</span><span class="token property-access">isComposing</span> <span class="token operator">===</span> <span class="token boolean">false</span> <span class="token operator">&amp;&amp;</span>
</span><span class="code-line">        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">state</span><span class="token punctuation">.</span><span class="token property-access">previousKey</span> <span class="token operator">!==</span> <span class="token string">&quot;Shift&quot;</span>
</span><span class="code-line">      <span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">        e<span class="token punctuation">.</span><span class="token method function property-access">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">props</span><span class="token punctuation">.</span><span class="token method function property-access">addBlock</span><span class="token punctuation">(</span><span class="token punctuation">{</span> 새로운 블럭 <span class="token function">추가</span> <span class="token punctuation">(</span>코드 생략<span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">      <span class="token punctuation">}</span>
</span><span class="code-line">    <span class="token punctuation">}</span>
</span></code></pre>
<p>조건식에 <code>e.nativeEvent.isComposing === false</code> 을 추가했다.</p>
<br/>
<p><img src="https://images.velog.io/images/corinthionia/post/7fef91ff-02e7-4f89-9077-f32c205be242/Feb-14-2022%2023-47-01.gif" alt=""/></p>
<p>콘솔에서 <code>e.nativeEvent.isComposing</code> 값을 확인해 보면, 첫 글자를 입력할 때와 공백을 입력할 때 <code>false</code> 값이 찍히고, 글자를 입력하는 동안에는 <code>true</code>, 마지막에 <code>Enter</code> 키를 누르면 <code>true</code>와 <code>false</code>가 <strong>함께</strong> 찍히게 된다.</p>
<p>따라서 이전에 입력한 키가 <code>Shift</code> 키가 <strong>아니고</strong>, <code>Enter</code>를 입력했을 때 <code>e.nativeEvent.isComposing</code> 값이 <code>false</code>이면 블럭을 추가하도록 구현하여 마지막 음절이 딸려오는 에러를 해결할 수 있었다!</p></main><div class="Border_border__6p8Eq"></div><section class="NeighborPost_section__W5SYa"><a href="/post/etc/move-utterances"><div class="NeighborPost_wrapper__Ul1n3"><span class="NeighborPost_top__Kp4Hx">← 이전 글</span><span class="NeighborPost_bottom__pe5NX">Utterances 댓글을 다른 포스트로 옮기기</span></div></a><a href="/post/record/dnd-8th"><div class="NeighborPost_wrapper__Ul1n3"><span class="NeighborPost_top__Kp4Hx">다음 글 →</span><span class="NeighborPost_bottom__pe5NX">IT 연합 동아리 DND 8기 활동 후기</span></div></a></section><section></section></article><div class="TOC_wrapper__ENCeM"></div></main></div></div><footer class="Footer_wrapper__r9Ps3">© Joohyun Kim (김주현) Corinthionia</footer><script src="/_next/static/chunks/webpack-bc90c703ef6ae2cf.js" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0]);self.__next_f.push([2,null])</script><script>self.__next_f.push([1,"1:HL[\"/_next/static/media/a15f2fce4b98b461-s.p.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n2:HL[\"/_next/static/media/ff840cfebfb63b0c-s.p.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n3:HL[\"/_next/static/css/d63a22f1046c7c17.css\",\"style\"]\n4:HL[\"/_next/static/css/46ef9796eceb51a7.css\",\"style\"]\n5:HL[\"/_next/static/css/bac92e9438d1258e.css\",\"style\"]\n6:HL[\"/_next/static/css/28418f50efbdfac4.css\",\"style\"]\n"])</script><script>self.__next_f.push([1,"7:I[1630,[],\"\"]\na:I[4311,[],\"\"]\nc:I[7357,[],\"\"]\nd:I[1080,[\"943\",\"static/chunks/943-00bda20aa4b030d5.js\",\"378\",\"static/chunks/378-0044a6d389c6dd71.js\",\"185\",\"static/chunks/app/layout-8fbc2f207f6b2569.js\"],\"ThemeProvider\"]\ne:I[7204,[\"943\",\"static/chunks/943-00bda20aa4b030d5.js\",\"378\",\"static/chunks/378-0044a6d389c6dd71.js\",\"185\",\"static/chunks/app/layout-8fbc2f207f6b2569.js\"],\"default\"]\n10:I[1048,[],\"\"]\nb:[\"slug\",\"javascript/keydown-keyup-twice\",\"c\"]\n11:[]\n"])</script><script>self.__next_f.push([1,"0:[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/d63a22f1046c7c17.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\"}],[\"$\",\"link\",\"1\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/46ef9796eceb51a7.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\"}]],[\"$\",\"$L7\",null,{\"buildId\":\"tPN3KuIK9Z2on3TYp87Ez\",\"assetPrefix\":\"\",\"initialCanonicalUrl\":\"/post/javascript/keydown-keyup-twice\",\"initialTree\":[\"\",{\"children\":[\"post\",{\"children\":[[\"slug\",\"javascript/keydown-keyup-twice\",\"c\"],{\"children\":[\"__PAGE__?{\\\"slug\\\":[\\\"javascript\\\",\\\"keydown-keyup-twice\\\"]}\",{}]}]}]},\"$undefined\",\"$undefined\",true],\"initialSeedData\":[\"\",{\"children\":[\"post\",{\"children\":[[\"slug\",\"javascript/keydown-keyup-twice\",\"c\"],{\"children\":[\"__PAGE__\",{},[[\"$L8\",\"$L9\"],null],null]},[\"$\",\"$La\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"post\",\"children\",\"$b\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$Lc\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\",\"styles\":[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/bac92e9438d1258e.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\"}],[\"$\",\"link\",\"1\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/28418f50efbdfac4.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\"}]]}],null]},[\"$\",\"$La\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"post\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$Lc\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\",\"styles\":null}],null]},[[\"$\",\"html\",null,{\"lang\":\"ko\",\"children\":[\"$\",\"body\",null,{\"className\":\"__className_f765bc\",\"children\":[\"$\",\"$Ld\",null,{\"children\":[[\"$\",\"$Le\",null,{}],[\"$\",\"div\",null,{\"className\":\"app_layout__Cl2eA\",\"children\":[\"$\",\"div\",null,{\"className\":\"app_grid__9m74A\",\"children\":[\"$\",\"main\",null,{\"className\":\"app_contents__RnFvu\",\"children\":[\"$\",\"$La\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$Lc\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[[\"$\",\"title\",null,{\"children\":\"404: This page could not be found.\"}],[\"$\",\"div\",null,{\"style\":{\"fontFamily\":\"system-ui,\\\"Segoe UI\\\",Roboto,Helvetica,Arial,sans-serif,\\\"Apple Color Emoji\\\",\\\"Segoe UI Emoji\\\"\",\"height\":\"100vh\",\"textAlign\":\"center\",\"display\":\"flex\",\"flexDirection\":\"column\",\"alignItems\":\"center\",\"justifyContent\":\"center\"},\"children\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}\"}}],[\"$\",\"h1\",null,{\"className\":\"next-error-h1\",\"style\":{\"display\":\"inline-block\",\"margin\":\"0 20px 0 0\",\"padding\":\"0 23px 0 0\",\"fontSize\":24,\"fontWeight\":500,\"verticalAlign\":\"top\",\"lineHeight\":\"49px\"},\"children\":\"404\"}],[\"$\",\"div\",null,{\"style\":{\"display\":\"inline-block\"},\"children\":[\"$\",\"h2\",null,{\"style\":{\"fontSize\":14,\"fontWeight\":400,\"lineHeight\":\"49px\",\"margin\":0},\"children\":\"This page could not be found.\"}]}]]}]}]],\"notFoundStyles\":[],\"styles\":null}]}]}]}],[\"$\",\"footer\",null,{\"className\":\"Footer_wrapper__r9Ps3\",\"children\":\"© Joohyun Kim (김주현) Corinthionia\"}]]}]}]}],null],null],\"couldBeIntercepted\":false,\"initialHead\":[false,\"$Lf\"],\"globalErrorComponent\":\"$10\",\"missingSlots\":\"$W11\"}]]\n"])</script><script>self.__next_f.push([1,"12:I[1943,[\"943\",\"static/chunks/943-00bda20aa4b030d5.js\",\"392\",\"static/chunks/app/post/%5B...slug%5D/page-19105f18c4d10820.js\"],\"\"]\n14:I[3174,[\"943\",\"static/chunks/943-00bda20aa4b030d5.js\",\"392\",\"static/chunks/app/post/%5B...slug%5D/page-19105f18c4d10820.js\"],\"default\"]\n15:I[1612,[\"943\",\"static/chunks/943-00bda20aa4b030d5.js\",\"392\",\"static/chunks/app/post/%5B...slug%5D/page-19105f18c4d10820.js\"],\"default\"]\n9:[[\"$\",\"article\",null,{\"className\":\"PostLayout_wrapper__4Zx6Q\",\"children\":[[\"$\",\"header\",null,{\"className\":\"Header_header__KPaCf\",\"children\":[[\"$\",\"h2\",null,{\"className\":\"Header_title__yFEr0\",\"children\":\"[JS] keydown/keyup에서 한글 입력 시 함수가 두 번 실행되는 경우\"}],[\"$\",\"div\",null,{\"className\":\"Header_info__GOBJ7\",\"children\":[[\"$\",\"$L12\",null,{\"href\":\"https://github.com/corinthionia\",\"target\":\"_blank\",\"children\":[\"$\",\"span\",null,{\"children\":\"@corinthionia\"}]}],[\"$\",\"span\",null,{\"children\":\"February 17, 2022\"}]]}]]}],[\"$\",\"main\",null,{\"className\":\"MDX_mdx__VyFNl\",\"children\":\"$L13\"}],[\"$\",\"div\",null,{\"className\":\"Border_border__6p8Eq\"}],[\"$\",\"section\",null,{\"className\":\"NeighborPost_section__W5SYa\",\"children\":[[\"$\",\"$L12\",null,{\"href\":\"/post/etc/move-utterances\",\"children\":[\"$\",\"div\",null,{\"className\":\"NeighborPost_wrapper__Ul1n3\",\"children\":[[\"$\",\"span\",null,{\"className\":\"NeighborPost_top__Kp4Hx\",\"children\":\"← 이전 글\"}],[\"$\",\"span\",null,{\"className\":\"NeighborPost_bottom__pe5NX\",\"children\":\"Utterances 댓글을 다른 포스트로 옮기기\"}]]}]}],[\"$\",\"$L12\",null,{\"href\":\"/post/record/dnd-8th\",\"children\":[\"$\",\"div\",null,{\"className\":\"NeighborPost_wrapper__Ul1n3\",\"children\":[[\"$\",\"span\",null,{\"className\":\"NeighborPost_top__Kp4Hx\",\"children\":\"다음 글 →\"}],[\"$\",\"span\",null,{\"className\":\"NeighborPost_bottom__pe5NX\",\"children\":\"IT 연합 동아리 DND 8기 활동 후기\"}]]}]}]]}],[\"$\",\"$L14\",null,{}]]}],[\"$\",\"$L15\",null,{}]]\nf:[[\"$\",\"meta\",\"0\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}],[\"$\",\"meta\",\"1\",{\"charSet\":\"utf-8\"}],[\"$\",\"meta\",\"2\",{\"name\":\"next-size"])</script><script>self.__next_f.push([1,"-adjust\"}]]\n8:null\n"])</script><script>self.__next_f.push([1,"13:[[\"$\",\"p\",null,{\"children\":[\"$\",\"img\",null,{\"src\":\"https://velog.velcdn.com/images/corinthionia/post/7ffd8d6e-fcd2-41ed-8e6b-0a77fb6e6851/image.gif\",\"alt\":\"\"}]}],\"\\n\",[\"$\",\"br\",null,{}],\"\\n\",[\"$\",\"p\",null,{\"children\":[[\"$\",\"a\",null,{\"href\":\"https://mailedit.kr\",\"children\":\"MailedIt!\"}],\" 서비스를 개발하다 오랫동안 해결하지 못한 에러가 있었다.\",[\"$\",\"br\",null,{}],\"\\n\",\"Notion처럼 텍스트를 입력하고 엔터를 누르면 새로운 블럭이 만들어지는데, 기존 텍스트의 마지막 음절이 딸려오는 에러가 발생했다.\"]}],\"\\n\",[\"$\",\"hr\",null,{}],\"\\n\",[\"$\",\"h2\",null,{\"id\":\"원인-분석\",\"children\":[[\"$\",\"a\",null,{\"aria-hidden\":\"true\",\"tabIndex\":\"-1\",\"href\":\"#원인-분석\",\"children\":[\"$\",\"span\",null,{\"className\":\"icon icon-link\"}]}],\"원인 분석\"]}],\"\\n\",[\"$\",\"h3\",null,{\"id\":\"1-onkeydown과-onkeypress\",\"children\":[[\"$\",\"a\",null,{\"aria-hidden\":\"true\",\"tabIndex\":\"-1\",\"href\":\"#1-onkeydown과-onkeypress\",\"children\":[\"$\",\"span\",null,{\"className\":\"icon icon-link\"}]}],\"1. onKeyDown과 onKeyPress\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"구글링 해 본 결과, 단순히 \",[\"$\",\"code\",null,{\"children\":\"onKeyDown\"}],\"을 \",[\"$\",\"code\",null,{\"children\":\"onKeyPress\"}],\"로 바꾸면 해결된다고 한다.\",[\"$\",\"br\",null,{}],\"\\n\",\"그럼 우선 이 둘의 차이점을 알아보자.\"]}],\"\\n\",[\"$\",\"blockquote\",null,{\"children\":[\"\\n\",[\"$\",\"p\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"onKeyDown:\"}],\" keycode 값 - 한/영, Shift, Backsapce 등 인식 가능\",[\"$\",\"br\",null,{}],\" \",[\"$\",\"strong\",null,{\"children\":\"onKeyPress:\"}],\" ASCII 값 - 한/영, Shift, Backsapce 등 인식 불가\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"하지만 우리 프로젝트에서는 \",[\"$\",\"code\",null,{\"children\":\"Shift\"}],\" 키와 \",[\"$\",\"code\",null,{\"children\":\"Backspace\"}],\" 키를 인식해야 해서 \",[\"$\",\"code\",null,{\"children\":\"onKeyPress\"}],\"를 \",[\"$\",\"strong\",null,{\"children\":\"사용할 수는 없었다.\"}]]}],\"\\n\",[\"$\",\"h3\",null,{\"id\":\"2-keyboardeventiscomposing\",\"children\":[[\"$\",\"a\",null,{\"aria-hidden\":\"true\",\"tabIndex\":\"-1\",\"href\":\"#2-keyboardeventiscomposing\",\"children\":[\"$\",\"span\",null,{\"className\":\"icon icon-link\"}]}],\"2. KeyboardEvent.isComposing\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[[\"$\",\"code\",null,{\"children\":\"KeyboardEvent.isComposing\"}],\"은 입력한 문자가 조합문자인지 아닌지를 판단한다. 한글은 자음과 모음의 조합으로 한 음절이 만들어지기 때문에 조합문자이고, 영어는 조합문자가 아니다.\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"한글을 입력할 때 자세히 보면 입력 중인 글자 바로 아래에 검은 밑줄이 생기는 경우가 있는데, 이 밑줄이 보이는 상황에서 \",[\"$\",\"code\",null,{\"children\":\"Enter\"}],\"키를 입력하면 이벤트가 2번 발생하는 이슈가 있다. 왜냐하면 글자가 조합 중인 건지, 조합이 끝난 상태인지 파악하기가 어렵기 때문이다.\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"그래서 이 이슈는 영어를 입력할 때에는 발생하지 않고, 한글을 입력할 때에만 발생한다 ㅠㅠ!\"}],\"\\n\",[\"$\",\"hr\",null,{}],\"\\n\",[\"$\",\"h2\",null,{\"id\":\"해결-과정\",\"children\":[[\"$\",\"a\",null,{\"aria-hidden\":\"true\",\"tabIndex\":\"-1\",\"href\":\"#해결-과정\",\"children\":[\"$\",\"span\",null,{\"className\":\"icon icon-link\"}]}],\"해결 과정\"]}],\"\\n\",[\"$\",\"h3\",null,{\"id\":\"1-프로젝트-로직-설명\",\"children\":[[\"$\",\"a\",null,{\"aria-hidden\":\"true\",\"tabIndex\":\"-1\",\"href\":\"#1-프로젝트-로직-설명\",\"children\":[\"$\",\"span\",null,{\"className\":\"icon icon-link\"}]}],\"1. 프로젝트 로직 설명\"]}],\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"code\",null,{\"children\":\"Enter\"}],\" 키 입력 시 블럭 생성\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"code\",null,{\"children\":\"Shift + Enter\"}],\" 키 입력 시 블럭 내에서 줄바꿈\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"code\",null,{\"children\":\"Backspace\"}],\"키가 입력되고, 블럭 안의 텍스트가 없거나 공백 문자만 있다면 블럭 삭제\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"br\",null,{}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"내가 작성한 코드는 아니지만,, 이전에 작성했던 코드는 다음과 같다.\"}],\"\\n\",[\"$\",\"pre\",null,{\"className\":\"language-jsx\",\"children\":[\"$\",\"code\",null,{\"className\":\"language-jsx\",\"children\":[[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"onKeyDownHandler\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token parameter\",\"children\":\"e\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token keyword control-flow\",\"children\":\"if\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"e\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token property-access\",\"children\":\"key\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"===\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"'Enter'\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"      \",[\"$\",\"span\",null,{\"className\":\"token keyword control-flow\",\"children\":\"if\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"this\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token property-access\",\"children\":\"state\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token property-access\",\"children\":\"previousKey\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"!==\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"'Shift'\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"        e\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token method function property-access\",\"children\":\"preventDefault\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"        \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"this\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token property-access\",\"children\":\"props\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token method function property-access\",\"children\":\"addBlock\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\" 새로운 블럭 \",[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"추가\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"코드 생략\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"      \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token keyword control-flow\",\"children\":\"else\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token keyword control-flow\",\"children\":\"if\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"      e\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token property-access\",\"children\":\"key\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"===\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"'Backspace'\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"\u0026\u0026\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"      \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"this\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token property-access\",\"children\":\"state\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token property-access\",\"children\":\"html\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"===\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"''\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"||\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"this\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token property-access\",\"children\":\"state\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token property-access\",\"children\":\"html\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"===\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"'\u003cbr\u003e'\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"      e\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token method function property-access\",\"children\":\"preventDefault\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"      \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"this\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token property-access\",\"children\":\"props\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token method function property-access\",\"children\":\"deleteBlock\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\" 블럭 \",[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"삭제\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"코드 생략\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"this\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token method function property-access\",\"children\":\"setState\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token literal-property property\",\"children\":\"previousKey\"}],[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" e\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token property-access\",\"children\":\"key\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],\"\\n\"]}]]}]}],\"\\n\",[\"$\",\"br\",null,{}],\"\\n\",[\"$\",\"h3\",null,{\"id\":\"2-onkeydown을-onkeypress로-바꿔-보기\",\"children\":[[\"$\",\"a\",null,{\"aria-hidden\":\"true\",\"tabIndex\":\"-1\",\"href\":\"#2-onkeydown을-onkeypress로-바꿔-보기\",\"children\":[\"$\",\"span\",null,{\"className\":\"icon icon-link\"}]}],\"2. onKeyDown을 onKeyPress로 바꿔 보기\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"이렇게 하면 \",[\"$\",\"code\",null,{\"children\":\"Shift\"}],\" 키와 \",[\"$\",\"code\",null,{\"children\":\"Delete\"}],\" 키를 \",[\"$\",\"strong\",null,{\"children\":\"인식하지 못해서\"}],\" 줄바꿈과 블럭 삭제가 안 되는 문제가 발생했다. 우리는 저 두 가지 키를 꼭 인식해야 하므로... \",[\"$\",\"code\",null,{\"children\":\"onKeyDown\"}],\"을 사용하며 해결할 방법을 모색했다.\"]}],\"\\n\",[\"$\",\"br\",null,{}],\"\\n\",[\"$\",\"h3\",null,{\"id\":\"3-eventnativeeventiscomposing--false-추가하기\",\"children\":[[\"$\",\"a\",null,{\"aria-hidden\":\"true\",\"tabIndex\":\"-1\",\"href\":\"#3-eventnativeeventiscomposing--false-추가하기\",\"children\":[\"$\",\"span\",null,{\"className\":\"icon icon-link\"}]}],\"3. \",[\"$\",\"u\",null,{\"children\":\"event.nativeEvent.isComposing === false 추가하기\"}]]}],\"\\n\",[\"$\",\"pre\",null,{\"className\":\"language-jsx\",\"children\":[\"$\",\"code\",null,{\"className\":\"language-jsx\",\"children\":[[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"onKeyDownHandler\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token parameter\",\"children\":\"e\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token keyword control-flow\",\"children\":\"if\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"e\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token property-access\",\"children\":\"key\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"===\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"Enter\\\"\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"      \",[\"$\",\"span\",null,{\"className\":\"token keyword control-flow\",\"children\":\"if\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"        e\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token property-access\",\"children\":\"nativeEvent\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token property-access\",\"children\":\"isComposing\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"===\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token boolean\",\"children\":\"false\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"\u0026\u0026\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"        \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"this\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token property-access\",\"children\":\"state\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token property-access\",\"children\":\"previousKey\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"!==\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"Shift\\\"\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"      \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"        e\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token method function property-access\",\"children\":\"preventDefault\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"        \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"this\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token property-access\",\"children\":\"props\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token method function property-access\",\"children\":\"addBlock\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\" 새로운 블럭 \",[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"추가\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"코드 생략\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"      \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],\"\\n\"]}]]}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"조건식에 \",[\"$\",\"code\",null,{\"children\":\"e.nativeEvent.isComposing === false\"}],\" 을 추가했다.\"]}],\"\\n\",[\"$\",\"br\",null,{}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"$\",\"img\",null,{\"src\":\"https://images.velog.io/images/corinthionia/post/7fef91ff-02e7-4f89-9077-f32c205be242/Feb-14-2022%2023-47-01.gif\",\"alt\":\"\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"콘솔에서 \",[\"$\",\"code\",null,{\"children\":\"e.nativeEvent.isComposing\"}],\" 값을 확인해 보면, 첫 글자를 입력할 때와 공백을 입력할 때 \",[\"$\",\"code\",null,{\"children\":\"false\"}],\" 값이 찍히고, 글자를 입력하는 동안에는 \",[\"$\",\"code\",null,{\"children\":\"true\"}],\", 마지막에 \",[\"$\",\"code\",null,{\"children\":\"Enter\"}],\" 키를 누르면 \",[\"$\",\"code\",null,{\"children\":\"true\"}],\"와 \",[\"$\",\"code\",null,{\"children\":\"false\"}],\"가 \",[\"$\",\"strong\",null,{\"children\":\"함께\"}],\" 찍히게 된다.\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"따라서 이전에 입력한 키가 \",[\"$\",\"code\",null,{\"children\":\"Shift\"}],\" 키가 \",[\"$\",\"strong\",null,{\"children\":\"아니고\"}],\", \",[\"$\",\"code\",null,{\"children\":\"Enter\"}],\"를 입력했을 때 \",[\"$\",\"code\",null,{\"children\":\"e.nativeEvent.isComposing\"}],\" 값이 \",[\"$\",\"code\",null,{\"children\":\"false\"}],\"이면 블럭을 추가하도록 구현하여 마지막 음절이 딸려오는 에러를 해결할 수 있었다!\"]}]]\n"])</script></body></html>